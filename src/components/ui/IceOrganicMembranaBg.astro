---
// src/components/ui/IceOrganicMembranaBg.astro
---

<div class="fixed inset-0 -z-50 overflow-hidden bg-ice-light pointer-events-none">
  
  <div class="w-full h-full relative">
    
    <div class="blob giant-1 bg-ice-mute"></div>
    <div class="blob giant-2 bg-ice-mute"></div>
    
    <div class="blob life-pulsar bg-ice-mute"></div>

    <div class="blob membrane-alpha"></div>
    
    <div class="blob membrane-omega"></div>

    <div class="blob rare-scout bg-slate-mid"></div>

  </div>
</div>

<style>
  /* Base Compartilhada Otimizada */
  .blob {
    position: absolute;
    border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
    /* GPU Acceleration */
    will-change: transform;
    backface-visibility: hidden;
    transform: translate3d(0, 0, 0);
  }

  /* Mix Blend - Lista reduzida */
  .giant-1, .giant-2, .life-pulsar, .rare-scout {
    mix-blend-mode: multiply;
  }

  /* --- CONFIGURAÇÃO DAS MEMBRANAS --- */
  .membrane-alpha, .membrane-omega {
    background: transparent;
    border: 2.5px solid var(--color-ice-mute);
    opacity: 0.9;
    filter: blur(1.5px);
    box-shadow: inset 0 0 15px rgba(0,0,0,0.01);
  }

  /* 1. GIGANTES (Atmosfera) */
  .giant-1 {
    top: -15%; right: -15%; width: 40vw; height: 40vw;
    filter: blur(40px); opacity: 0.6;
    animation: tide 60s infinite alternate ease-in-out;
  }
  .giant-2 {
    bottom: -15%; left: -15%; width: 50vw; height: 50vw;
    filter: blur(45px); opacity: 0.2;
    animation: tide 70s infinite alternate-reverse ease-in-out;
  }
  
  /* 2. PULSAR (Única forma 'viva' média restante) */
  .life-pulsar {
    top: 40%; right: 30%; width: 18vw; height: 18vw;
    filter: blur(45px); opacity: 0.65;
    animation: circular-pulse 35s infinite linear, morph-medium 15s infinite alternate ease-in-out;
  }

  /* 3. MEMBRANAS (Linhas) */
  .membrane-omega {
    top: -50%; left: -50%; width: 90vw; height: 90vw;
    border-width: 1.5px; opacity: 0.7;
    animation: hunt-titan 180s infinite linear, morph-aggressive 25s infinite alternate ease-in-out;
    animation-delay: 5s;
  }
  .membrane-alpha {
    top: 10%; left: -30%; width: 25vw; height: 25vw;
    animation: hunt-long 70s infinite linear, morph-aggressive 10s infinite alternate ease-in-out;
  }

  /* 4. SCOUT (Detalhe) */
  .rare-scout {
    top: 60%; left: -10%; width: 4vw; height: 4vw;
    filter: blur(10px); opacity: 0.15;
    animation: rare-visit 60s infinite cubic-bezier(0.4, 0, 0.2, 1), morph-light 5s infinite alternate ease-in-out;
  }

  /* --- COREOGRAFIAS (GPU Optimized) --- */
  @keyframes tide { 
    0% { transform: translate3d(0, 0, 0); } 
    100% { transform: translate3d(-30px, 20px, 0); } 
  }
  @keyframes circular-pulse { 
    0% { transform: rotate(0deg) translate3d(5vw, 0, 0); } 
    100% { transform: rotate(360deg) translate3d(5vw, 0, 0); } 
  }
  @keyframes hunt-titan {
    0% { transform: translate3d(0, 0, 0) rotate(0deg); }
    30% { transform: translate3d(150vw, 150vh, 0) rotate(60deg); }
    100% { transform: translate3d(150vw, 150vh, 0) rotate(60deg); }
  }
  @keyframes hunt-long {
    0% { transform: translate3d(0, 0, 0) rotate(0deg); }
    30% { transform: translate3d(130vw, 20vh, 0) rotate(120deg); }
    100% { transform: translate3d(130vw, 20vh, 0) rotate(120deg); }
  }
  @keyframes rare-visit { 
    0% { transform: translate3d(0, 0, 0); opacity: 0; } 
    5% { opacity: 0.15; } 
    25% { transform: translate3d(110vw, -15vh, 0); opacity: 0.15; } 
    26% { opacity: 0; } 
    100% { transform: translate3d(110vw, -15vh, 0); opacity: 0; } 
  }

  /* --- MORPHS (Mantidos apenas os necessários) --- */
  @keyframes morph-medium { 0% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; } 50% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; } 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; } }
  @keyframes morph-aggressive { 0% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; } 25% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; } 50% { border-radius: 80% 20% 50% 50% / 40% 40% 60% 60%; } 75% { border-radius: 40% 60% 30% 70% / 60% 30% 70% 40%; } 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; } }
  @keyframes morph-light { 0% { border-radius: 50% 50% 50% 50% / 50% 50% 50% 50%; } 100% { border-radius: 45% 55% 55% 45% / 45% 55% 45% 55%; } }

  @media (max-width: 768px) {
    .giant-1, .giant-2 { opacity: 0.4; }
    .membrane-alpha { width: 45vw; height: 45vw; }
    .membrane-omega { width: 120vw; height: 120vw; }
  }
</style>